# 페어 프로그래밍

페어 - 경민님과 나

**22년 12월 23일(금) 13:10~18:10**

모임장소 : 오프라인 학습장

**22년 12월 24일(토) 07:40~09:40**

모임장소 : 온라인 게더타운



**페어프로그래밍의 목적**

- 네비나 드라이버를 번갈아 하면서 뭘 모르는지 짚고 깊게 파고들어 알고 넘어가자.
- 함께 일하고 싶은 동료가 되자 !



**사용 API**

- TMDB API(https://developers.themoviedb.org/3)

**개발언어 / 프로그램**

- Python 3.10
- Jupyter notebook

**라이브러리**

- `request` 
  - `$ pip install requests`

```python
import requests  # requests 모듈 호출
result = requests.get(URL)  # URL로 요청 보냄
data = result.json()  # 요청의 응답 JSON을 dict으로 변환
print(data)  # data 확인
```



## 문제1

인기 영화 조회 인기 영화의 개수를 출력합니다.

1. `requests`를 이용하여 인기 영화 정보(Get Popular)에 요청을 보냅니다.
2. popular를 기준으로 받아온 데이터에서 영화 리스트의 개수를 계산합니다.
3. 계산한 정보를 반환하는 함수 `popular_count`를 완성합니다.

```python
# 네비 순서
# 1.json데이터를 print해보세요.
# 2.{로 시작하는 데이터 중 'results'라는 key의 value에 [] 하나의 리스트가 있다. 그 리스트 안에 또 dict로 이뤄진 [{},{},{},...,{}]여러 영화데이터가 있다.
# 3.영화데이터가 하나의 list이니까 list메소드를 활용해 몇개의 영화가 있는지 세주세요.
```



## 문제2

문제1 에서 popular를 기준으로 가져온 영화 목록 중 평점이 8 이상인 영화들의 목록을 출력합니다.

1. `requests`를 이용하여 인기 영화 정보(Get Popular)에 요청을 보냅니다.
2. 받아온 데이터에서 평점(key `vote_average`)를 기준으로 점수가 8 이상인 영화들의 목록을 리스트로 반환하는 함수 `vote_average_movies`를 완성합니다.

```python
# 네비 순서
# 1.영화리스트 중 첫번째 영화의 평점값을 출력해주세요.
# 2.영화리스트 개수만큼의 평점값들을 출력해주세요.
# 3.영화리스트 개수만큼의 평점값들 중 8 이상인 것만 출력해주세요.
# 4.영화리스트 개수만큼의 평점값들 중 8 이상인 것만 (평점'vote_average'을 출력하지말고) 해당 영화 dict데이터 자체를 출력해주세요.
# 5.영화리스트 개수만큼의 평점값들 중 8 이상인 것만 (평점'vote_average'을 출력하지말고) 해당 영화 dict데이터 자체를 print(출력)하지 말고
# 6.빈 list 하나를 만드세요. []
# 7.그 빈 list에 각 영화를 append해주세요. [{},{}]
# 8.vote_average_movies라는 이름의 함수를 정의해서 8점 이상인 영화들을 하나의 리스트에 담아 return하세요.
```



## 문제3

특정 조건에 맞는 인기 영화 조회 II 영화목록을 평점순으로 출력하는 함수를 완성합니다.

1. `requests`를 이용하여 인기 영화 정보(Get Popular)에 요청을 보냅니다.
2. 받아온 데이터 중 평점(key `vote_average`)이 높은 영화 다섯개의 정보를 리스트로 반환하는 함수 `ranking`을 완성합니다.

```python
# 네비 순서
# 1.영화리스트 안에서 각 영화 dict의 'vote_average'순으로 내림차순 정렬
sorted_films = sorted(movie, key = lambda film:film['vote_average'], reverse=True)
# 2.정렬된 영화리스트를 [0]~[4] 5개만 남겨주세요.
# 3.ranking()함수를 정의해서 top5만 리스트만 반환해주세요.
```



---------



## 문제4

특정 영화 추천 영화 조회 제공된 영화 제목을 기준으로 추천영화 목록을 출력합니다.

1. `requests`를 이용하여 영화 검색(Search Movies) 요청을 보냅니다. (인자로 넘어온 `title` 사용)
2. 결과중 첫번째 영화가 검색한 영화가 맞다면 해당 영화의 id를 사용합니다.
3. id를 기반으로 추천영화 목록 조회 (Get Recommendations) URL을 생성합니다.
4. `requests`를 이용하여 추천영화 목록 조회 URL에 요청을 보냅니다.
5. 추천받은 영화 리스트에서 **제목만을** 리스트에 저장합니다.
6. 저장된 리스트를 반환하는 함수 `recommendation`을 완성합니다.
7. (2번) id값은 있지만 추천영화가 없는 경우 빈 리스트를 반환합니다.
8. (3번) 올바르지 않은 영화 제목으로 검색할 수 없는 경우 `None`을 반환합니다.

```python
# 네비 순서
# 1. title = '기생충' 이라고 예시로 정의하고 시작
# 2. url의 title자리에 {title}변수를 넣어주세요.
# 3. 요청 받아온 data에서 첫번째 영화의 id에 접근해주세요.
# 4. 만약 title이 첫번째 영화 original_title과 같다면 해당 영화의 id를 id변수에 담아놔 주세요. 이후에 recommend 요청시 쓸 것입니다.
# 5. 영화 id를 이용해서 recommendation 목록을 받기위한 요청을 보내세요.
# 6. recommendation 응답을 받은 데이터 중 original_title을 빈 리스트에 하나씩 append주세요. 
# 6-1. list는 +연산이 되지 않습니다. dir(list)를 활용해 사용할 수 있는 메소드를 검색해보세요.
# 7. 저장된 리스트를 반환하는 함수 recommendation을 완성해주세요.
# 8. 올바르지 않은 걸 입력하면 어떤 데이터가 나오는지 확인해주세요. 
# 8-1. 영화제목 검색 요청 응답 단계에서 data['result']가 []로 나오니 이를 이용해 None 반환하도록.
# 9. id값은 있지만 추천영화가 없는 경우 빈 리스트를 반환합니다.
# 9-1. id 검색 후 추천목록 url 요청 응답 단계에서 data['result']가 []로 나오니 이를 이용해 [] 반환하도록.
```



**페어프로그래밍 진행방법**

- 짝꿍이 네비를 할때는 묵묵히 그대로 코딩을 하고 나중에 어느 부분에서 벗어났는지 짚고 넘어갔다. 내가 네비를 할때는 컴퓨터와 짝꿍이 모두 알아 들을 수 있는 말로 예시를 들어가며 번역하면서 천천히 진행했다.(ex. 영화리스트, 영화데이터, id, 평점 -> 반,학생, 주민번호, 몸무게로) 

**배운점**

- 평점을 기준으로 데이터를 정렬해야 했다. `sorted(movie.items(), reverse = True)`로 정렬하려고 했는데 이건 key인 id 기준으로만 정렬되어서 value인 평점 기준으로 정렬하려고 애쓰다가 결국 평점과 id의 위치를 바꿔서 평점이 key가 되게 했는데 이러니까 20개였던 데이터가 14개로 줄어서 한동안 헤맸다. key는 유일해야되니까 id가 그대로 key여야됐던 것이다. 평점이 중복되는 것들이 있어서 덮어씌워졌다.

- 이는 sort에 lambda함수를 적용해 list 내의 dict의 value를 기준으로 정렬할 수 있다.

**개선할 점**

- 문제 3번에서 평점순으로 출력하는 것을 영화 데이터들 중 id와 평점만 뽑아내고 -> 내림차순 정렬 후 -> 높은 순 5개를 잘라 -> 그 id로 다시 접근해 영화 제목만들 뽑아오려는 생각으로 네비를 하며 끙끙대고 있었는데 강사님이 sort에 여러 기능이 있다는 힌트를 주셔서 개선했다.
- 계속 쓰던 for문은 map으로 고쳐볼 수 있을 것 같다.

**첫 페어프로그래밍을 하면서 느낀점**

- json데이터를 분석해서 원하는 key값까지 접근하는 것을 네비게이터로 설명하면 할수록 나도 눈에 잘 보이지 않던 데이터가 한 눈에 들어왔다. 알고 있는 것을 말로 설명하면서 진짜로 내가 아는 게 맞는지 안다고 착각하고 있는건지 알 수 있었다. 두명의 실력에 무관하게 누구에게나 도움이 되는 공부법인 것 같다.

- 어디까지 풀었냐고 묻는 팀들이 중간 중간 있었는데 그럴 때마다 짝꿍이 많이 긴장했다. 자신때문에 속도가 늦어지고 피해가 갈까봐 미안하다고 하길래 우리의 목표는 `들음->배움->모름->내가 뭘 모르는지 앎->앎`의 단계에서 뭘 모르는지 아는거라고, `다른사람[오늘] > 나[오늘]`와 비교하지 않고 `나[오늘] > 나<어제>`와 비교하면 마음이 편하다고, 나도 많은 도움이 된다고 했더니 위안을 얻었다고 자주 이런 스터디를 하자고 해서 나 또한 고마웠다.  실력과 무관하게 확실히 열린 마음으로 듣고 의견조율을 해 나갈 수 있는 사람이 함께 일하고 싶은 동료라고 생각했다.

  
