# 클라우드 컴퓨팅

**22년 12월 20일 (화) ~ 12월 21일 (수)** 

## 1. 클라우드컴퓨팅 아키텍처 분석

### **클라우드 컴퓨팅?**

인터넷 기반 컴퓨팅의 일종으로 

정보를 내 컴퓨터가 아니라 인터넷에 연결된 다른 컴퓨터로 처리하는 기술

### **서버 인프라의 역사**

| 90년대                       | 2000년대                     |
| ---------------------------- | ---------------------------- |
| 메인 프레임, 클라이언트 서버 | 호스팅 서버, 클라우드 컴퓨팅 |



### 클라우드 컴퓨팅 특징

미국 NIST(미국 국립표준기술원)에서 클라우드 컴퓨팅 특징 5개를 정함

1. **On-demand self-service** 요청에 따라 즉각적으로 서비스 된다. 

   사업자랑 직접 안 만나도 내가 로그인 하고 만들고 개별 관리화면 통해 서비스 이용 가능.

2. **Broad network access** 

   기존 호스팅과 클라우드 컴퓨팅의 가장 큰 차이이다. 

   - 전세계. 폭넓은 네트워크 접근성.

   - 모바일 기기 등 다양한 디바이스를 통해 서비스에 접속 가능.

3. **Resource pooling**리소스의 공유

   - 사업자의 컴퓨팅 리소스를 여러 사용자가 공유하는 형태로 이용. 
   - 사용자는 자신이 사용하는 리소스의 정확한 위치를 알 수 없다.

4. **Rapid elasticity**

   신속한 확장성. 처음에 계약할 때는 1gb했는데 쓰다보니 더 필요하네? 

   필요에 따라 필요한 만큼 스케일 업 & 다운 가능

5. **Measured service(metering)**

   이용한 만큼 요금이 부과되는 종량제(pay as you go)



### 클라우드 컴퓨팅의 분류

**서비스를 제공하는 모델에 따라 분류**

- **SaaS(Software as a Service)**
  - 바로 직접 사용 가능한 소프트웨어 제공한다.
- **Platform as a Service(PaaS)**
  - 인프라 위에 개발환경(플랫폼)까지 제공한다.
- **Infrastructure as a Service(laaS)**
  - 인프라 스트럭쳐만 제공한다.
  - 서비스 소프트웨어, 개발환경은 이용하는 사람이 스스로 구축한다.

| Iaas               | PaaS                 | SaaS                 |
| ------------------ | -------------------- | -------------------- |
| Applications       | Applications         | **Applications**     |
| Data               | Data                 | **Data**             |
| Runtime            | **Runtime**          | **Runtime**          |
| Middleware         | **Middleware**       | **Middleware**       |
| Operating System   | **Operating System** | **Operating System** |
| **Virtualization** | **Virtualization**   | **Virtualization**   |
| **Servers**        | **Servers**          | **Servers**          |
| **Storage**        | **Storage**          | **Storage**          |
| **Networking**     | **Networking**       | **Networking**       |

굵은 글씨 Managed by vendor



**서비스를 어떻게 배치하느냐에 따라 분류**

- **Private Cloud** 

  기관 내에서만 쓰겠다.

- **Public Cloud**

  일반 사용자도 쓸 수 있게 범용적으로 서비스 제공(아마존,구글,MS,등)

- Hybrid Cloud

  Public Cloud 장점 + Private Cloud

- Community Cloud

  사용하는 기관 목적에 따라 특정 기능만 별도로 제공 

  ex)병원, 헬스케어

  

---

## 2. 하드웨어 인프라 분석

**인프라개발자가 알아야 할 것들**

1. 소프트웨어

- 네트워크 & 네트워크 가상화(SDN, NFV)

​		- 서버? : 서비스를 제공하는 눈에 보이지 않는 컴퓨터

​		- 클라우드? : 인터넷

​		- 네트워크? : 엄청나게 많은 (컴퓨터)서버들이 서로 연결 

- Storage

  - 블록 스토리지
  - 오브젝트 스토리지

- Servers

  - 하드웨어 서버

    Linux 운영체제 설치 및 설정

  - 소프트웨어 서버

    서비스 데몬 설치 및 설정(Web, DB)

  - 서버 하나가 여러개인 것처럼 돌리는 서버 가상화

    하이퍼바이저 vs 컨테이너

  - DevOps
  - Infrastructure as a Code 인프라를 코드처럼 관리

2. 하드웨어

- 네트워크 장비(스위치, 라우터)

- 스토리지 장비 Cold vs Hot

  ex) 카톡으로 이미지 전송했다. 한번 전송한 사진은 나중에 다시 볼 수 있다. 계속 다시 보는 건 아니니까 Cold스토리지에 저장해뒀다가 요청 있으면 좀 늦더라도 제공해준다.

- 서버 장비

- 서버 모니터링 및 관리(BMC)



### 하드웨어 인프라 범위

1. Compute

2. Block Storage

3. Network

#### 클라우드 컴퓨팅 하드웨어 인프라가 구축된 장소는 어디인가?

온도 습도 전력 최적화로 관리되는 건물인 **데이터센터**

- 서버 고장나면 빠른 시간내에 복구해야되니까 도심지 근처에 데이터센터가 지어짐
- 소모전력의 50%가 냉각에 사용된다.

**데어터센터를 구성하는 하드웨어 구성요소 3가지는?**

데이터센터(건물) -> 서버 랙 -> 서버(하드웨어)

- 페이스북의 데이터센터 오픈 소스 프로젝트(**OCP**) = Facility Platform

​	구글은 공개하지 않았고 페이스북은 공개했다.



### 서버 구조 분석

#### 서버에서 BMC가 무엇이고 어떤 역할을 하는가?

**B**aseboard **M**anagement **C**ontroller

서버의 OS가 부팅되기도 전부터 **서버를 원격으로 관리**하는 것



(BMC 소프트웨어를 제공하는 기업은 독점되어 있다.)

- 국내에서도 국산 서버를 만들자는 프로젝트가 있다.

​		국내에서 나오는 대부분의 서버는 인텔에서 나오는 CPU를 가지고 마더보드를 대만에서 만들고 거기에 케이스를 만들어 납품하는게 대부분.

​		거기에 올라가는 BMC 소프트웨어도 자체적으로 만들어 오픈소스화 하려는 기업들도 있다.



---

## 3. 가상화 인프라 분석

### 가상화 기술이 무엇인가?

분신술. 같은 시간 내에 많은 일을 하자.

하나의 서버에 하나의 소프트웨어의 서비스만 돌아가면 비효율적이니

하나의 물리적 서버를 두고 소프트웨어적으로는 여러개가 여러개 있는 것처럼 운영체제 여러개 설치하고 소프트웨어도 여러개 돌려서 하나의 서버에 여러개 서비스를 동시에 돌리자~~

| Traditional Server Architecture | Virtualized Server Architecture                    |
| ------------------------------- | -------------------------------------------------- |
| 서버                            | 서버                                               |
| Operating System                | Virtualization Layer(하이퍼바이저)                 |
| Application                     | \|OS-App\|OS-App\|OS-App\|OS-App\|OS-App\|OS-App\| |

ex) VMware, VirtualBox, KVM



### 가상화가 가능한 4가지 분야

1. 데이터 가상화

   다수의 이기종 데이터를 단일한 소스로 접근 가능

   지역적 범위도 넓어지고, 단말기 종류도 광범위해짐. 수많은 디바이스들. 디지털 트랜스포메이션.

2. 네트워크 기능 가상화

   NFV(Network Functions Virtulization)

3. 서버 가상화

   **하이퍼바이저(Hypervisor)**

4. 운영체제 가상화

   **컨테이너(Container)**



#### 하이퍼바이저가 무엇인가?

서버 자체를 가상화하는거

하나의 물리적 서버를 여러개의 가상 소프트웨어로 만들어진 서버로 만드는 방법은 하이퍼바이저라는 소프트웨어로 가능하게 된다.



#### 하이퍼바이저와 요즘 뜨고 있는 컨테이너 간 차이점이 무엇인가?

하나의 운영체제 내에 어플리케이션들을 컨테이너라는 가상화 공간에 넣어서 효율적으로 관리

컨테이너 대표적인 두 축

- Linux Contatiners(LXC, LSC)

- docker

컨테이너? 

어플리케이션이 실행되는 영역을 격리시키는 것이 개념의 핵심이다. 

하나의 어플리케이션을 하나의 컨테이너에 집어넣는다.



#### 하이퍼바이저의 두가지 타입(Type1, Type2)차이는?

- Type1(native, bare metal) 서비스 제공용

  - Hardware - Hypervisor - OS

    운영체제를 올리기도 전에 하이퍼바이저를 깐다

    하나의 컴퓨터에 여러개의 운영체제가 동시에 실행

- Type2(hosted) 개발자용

  - Hardware - OS - Hypervisor - OS

    ex) 윈도우 노트북에 윈도우용 버추얼박스app설치하고 그 app 안에서 리눅스를 설치

---

## 4. 컨테이너 인프라 분석

### 리눅스 컨테이너의 특징

- 하이퍼바이저 - 단일 시스템에서 여러 운영체제가 동시에 실행

- 리눅스 컨테이너 - 단일 커널에서 여러 컨테이너가 동시에 실행

하나의 운영체제에 컨테이너 여러개 두는 것이기 때문에 동일한 운영체제용 어플리케이션만 컨테이너로 만들 수 있다.

컨테이너를 사용하려면 리눅스 기반의 어플리케이션이어야한다는 것이 단점.



사용자 프로세스 가상화기술(Lightweight process virtualization)은 새로운 것이 아니다.

근데 왜 클라우딩컴퓨팅 시대 와서야 요즘 뜨는가?

- 리눅스 커널 레벨에서 컨테이너 기능을 지원하기 시작했기 때문



### LXC 특징과 구조

일반 사용자 프로세스와 달리 컨테이너는 커널 수준의 서비스를 직접 지원 받는다. 

Name Spaces - 컨테이너를 격리(만약 컨테이너가 잘못되면 시스템 전체가 잘못될 가능성이 높다. 컨테이너가 잘못되어도 시스템과는 무관하게 해당되는 자원 할당되는 영역을 격리시켜주는 것이 무엇보다 중요하다)

Cgroups - 자원(CPU, 메모리, 블록 I/O, 네트워크 등)을 할당

SELinux - 커널 수준의 보안 제공



### Docker 특징과 LXC와의 차이점은?

**LXC(Linux Containers)**

LXC is a userspace interface for the Linux kernel containment features. Through a powerful API and simple tools, it lets Linux users easily creae and manage system or application containers.



### 하이퍼바이저 대신 컨테이너가 등장한 배경은?



### OS 가상화와 App 가상화(격리)의 차이점은?





---

## 5. 오픈스택





---

## 6. 오픈스택 구축 실습



